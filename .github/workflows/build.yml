name: Build for Signulous
on: [push]
jobs:
  build:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4

      - name:  Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 18

      - name:  Install Dependencies
        run: |
          npm install
          npm install -g eas-cli

      - name:  Build Simulator/Unsigned App
        run: |
          # 驻拽   转 "砖" 砖 驻拽爪 -iOS
          #  转爪专 转拽转 build 注 拽抓 .app 转
          npx expo run:ios --configuration Release --device --no-bundler --prebuild-only
          
          # 专 砖 -app 转 拽抓 砖砖专转  注 拽专
          mkdir -p dist/Payload
          cp -r ios/*.app dist/Payload/ || true
          cd dist && zip -r SalaryApp.ipa Payload/

      - name:  Upload to GitHub
        uses: actions/upload-artifact@v4
        with:
          name: Ready-For-Signulous
          path: dist/SalaryApp.ipa
